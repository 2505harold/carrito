<div class="card shadow-sm">
  <div class="card-body" *ngIf="!showForm">
    <div class="d-flex justify-content-between">
      <h3 class="font-weight-lighter">Mis Productos</h3>
      <button mat-raised-button color="accent" (click)="verForm('Agregar')">
        Agregar
      </button>
    </div>
    <hr />
    <div class="card-body overflow pt-0" [style.height.px]="300">
      <table mat-table [dataSource]="datosTabla" matSort>
        <!-- Item Column -->
        <ng-container matColumnDef="index">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>ITEM</th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ i + 1 }}
          </td>
        </ng-container>

        <!-- Column -->
        <ng-container matColumnDef="prod_codigo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>CODIGO</th>
          <td mat-cell *matCellDef="let element">
            {{ element.prod_codigo }}
          </td>
        </ng-container>

        <!-- Column -->
        <ng-container matColumnDef="prod_nombre">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>NOMBRE</th>
          <td mat-cell *matCellDef="let element">
            {{ element.ct_categoria }}
          </td>
        </ng-container>

        <!-- Column -->
        <ng-container matColumnDef="mc_marca">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>MARCA</th>
          <td mat-cell *matCellDef="let element">
            {{ element.mc_marca }}
          </td>
        </ng-container>

        <!-- Column -->
        <ng-container matColumnDef="ct_categoria">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>CATEGORIA</th>
          <td mat-cell *matCellDef="let element">
            {{ element.ct_categoria }}
          </td>
        </ng-container>

        <!-- Column -->
        <ng-container matColumnDef="md_modelo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>MODELO</th>
          <td mat-cell *matCellDef="let element">
            {{ element.ct_categoria }}
          </td>
        </ng-container>

        <!-- Column -->
        <ng-container matColumnDef="prod_precio">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>PRECIO</th>
          <td mat-cell *matCellDef="let element">
            {{ element.prod_precio }}
          </td>
        </ng-container>

        <!-- Column -->
        <ng-container matColumnDef="prod_cantidad">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>CANTIDAD</th>
          <td mat-cell *matCellDef="let element">
            {{ element.prod_cantidad }}
          </td>
        </ng-container>

        <!--Acciones-->
        <ng-container matColumnDef="acciones">
          <th mat-header-cell *matHeaderCellDef>ACCIONES</th>
          <td mat-cell *matCellDef="let element">
            <button mat-stroked-button color="primary">Ver pedidos</button>
          </td>
        </ng-container>
        <ng-container matColumnDef="noData">
          <td mat-footer-cell *matFooterCellDef colspan="4" class="text-center">
            No hay datos encontrados
          </td>
        </ng-container>
        <tr
          mat-footer-row
          *matFooterRowDef="['noData']"
          [ngClass]="{
            hide: !(datosTabla != null && datosTabla.data.length == 0)
          }"
        ></tr>

        <tr mat-header-row *matHeaderRowDef="cols; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: cols"></tr>
      </table>
    </div>
  </div>
  <div class="card-body" *ngIf="showForm">
    <h3 class="font-weight-lighter">{{ actionForm }}</h3>
    <h2 class="warn-angular font-weight-lighter">Producto</h2>

    <div class="row">
      <div class="col-sm-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Nombre</mat-label>
          <input
            [(ngModel)]="datosProducto.prod_nombre"
            matInput
            placeholder="ingrese nombre"
            autocomplete="off"
          />
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Codigo</mat-label>
          <input
            [(ngModel)]="datosProducto.prod_codigo"
            matInput
            placeholder="ingrese codigo"
            autocomplete="off"
          />
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Precio</mat-label>
          <input
            [(ngModel)]="datosProducto.prod_precio"
            matInput
            placeholder="ingrese precio"
            autocomplete="off"
          />
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Cantidad</mat-label>
          <input
            [(ngModel)]="datosProducto.prod_cantidad"
            matInput
            placeholder="ingrese cantidad"
            autocomplete="off"
          />
        </mat-form-field>
      </div>
      <div class="col-sm-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Marca</mat-label>
          <mat-select [(ngModel)]="datosProducto.idmarca">
            <mat-option
              value="{{ option.idmarca }}"
              *ngFor="let option of optMarca"
              >{{ option.mc_marca }}</mat-option
            >
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Categoria</mat-label>
          <mat-select
            [(ngModel)]="datosProducto.idcategoria"
            #categoria
            (selectionChange)="categChange(categoria.value)"
          >
            <mat-option
              [value]="option.idcategoria"
              *ngFor="let option of optCateg"
              >{{ option.ct_categoria }}</mat-option
            >
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Modelo</mat-label>
          <mat-select [(ngModel)]="datosProducto.idmodelo">
            <mat-option
              value="{{ option.idmodelo }}"
              *ngFor="let option of optModelo"
              >{{ option.md_modelo }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <br />
    <button mat-raised-button color="primary" (click)="ocultarForm()">
      Regresar
    </button>
    <button type="submit" mat-raised-button color="warn" (click)="guardar()">
      Guardar
    </button>
  </div>
</div>
